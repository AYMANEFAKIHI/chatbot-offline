:root{
  --bg:linear-gradient(180deg,#eaf2ff 0%, #f8fbff 100%);
  --card: rgba(255,255,255,0.65);
  --muted:#5b6b7a;
  --accent:#176fe5;
  --accent-2:#00a3ff;
  --user: linear-gradient(90deg,#dff4ff,#e6f9ff);
  --bot: linear-gradient(90deg,#ffffff,#f3f7ff);
  --glass-shadow: 0 8px 30px rgba(12,20,40,0.12);
  --radius:14px;
  --glass-border: rgba(255,255,255,0.25);
  --glass-border-dark: rgba(255,255,255,0.06);
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color-scheme: light;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);padding:18px}
.app{display:grid;grid-template-columns:1fr 420px;gap:18px;width:min(1200px,98%);align-items:start}

.app-header{grid-column:1 / -1;display:flex;justify-content:space-between;align-items:center;padding:16px;border-radius:16px;background:var(--card);backdrop-filter: blur(8px);box-shadow:var(--glass-shadow);border:1px solid var(--glass-border)}
.app-header .title h1{margin:0;font-size:18px}
.app-header .subtitle{margin:0;font-size:12px;color:var(--muted)}
.header-actions button{margin-left:8px;padding:8px;border-radius:10px;border:0;background:transparent;cursor:pointer;font-size:14px}

.chat-area{background:var(--card);border-radius:14px;padding:12px;box-shadow:var(--glass-shadow);display:flex;flex-direction:column;min-height:560px;backdrop-filter: blur(6px);border:1px solid var(--glass-border)}
.chat-window{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:12px;scroll-behavior:smooth}
.message{max-width:78%;padding:12px 14px;border-radius:12px;box-shadow:0 4px 16px rgba(16,24,40,0.05);font-size:14px;line-height:1.4;transition:transform .12s ease,opacity .12s ease}
.message.user{align-self:flex-end;background:var(--user);border-bottom-right-radius:6px;transform-origin:100% 100%}
.message.bot{align-self:flex-start;background:var(--bot);border-bottom-left-radius:6px}
.message.enter{animation:pop .18s ease}
@keyframes pop{from{transform:scale(.98);opacity:0}to{transform:scale(1);opacity:1}}

.meta{font-size:11px;color:var(--muted);margin-bottom:6px}

.composer{display:flex;gap:8px;padding-top:8px}
.composer input{flex:1;padding:14px;border-radius:12px;border:1px solid rgba(20,30,60,0.06);font-size:14px;background:rgba(255,255,255,0.6)}
.composer button{padding:12px 16px;border-radius:12px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;cursor:pointer;box-shadow:0 6px 18px rgba(0,110,255,0.12)}

.panel{background:var(--card);border-radius:14px;padding:12px;box-shadow:var(--glass-shadow);height:560px;overflow:auto;backdrop-filter: blur(6px);border:1px solid var(--glass-border)}
.panel-section{margin-bottom:14px}
.rules-controls{display:flex;gap:8px;margin-bottom:8px}
.rules-controls button{padding:8px;border-radius:8px;border:1px solid var(--glass-border-dark);background:transparent;cursor:pointer}

.rules-list{display:flex;flex-direction:column;gap:8px}
.rule-card{border:1px solid rgba(10,20,40,0.03);padding:10px;border-radius:10px;background:rgba(255,255,255,0.5);display:flex;flex-direction:column;gap:8px}
.rule-header{display:flex;justify-content:space-between;align-items:center}
.rule-meta{font-weight:600;font-size:14px}
.rule-actions button{margin-left:6px;padding:6px;border-radius:6px;border:0;background:transparent;cursor:pointer}
.patterns{display:flex;gap:6px;flex-wrap:wrap}
.pattern-badge{background:rgba(255,255,255,0.7);padding:6px 8px;border-radius:999px;border:1px solid rgba(0,0,0,0.03);font-size:12px}
.responses div{margin-top:6px}

.context-view{background:rgba(255,255,255,0.45);padding:8px;border-radius:8px;border:1px solid var(--glass-border-dark)}
.context-actions button{margin-top:8px;padding:8px;border-radius:8px;border:1px solid var(--glass-border-dark);background:transparent;cursor:pointer}
.stats-view{background:rgba(255,255,255,0.45);padding:8px;border-radius:8px;border:1px solid var(--glass-border-dark)}
.stats-item{display:flex;justify-content:space-between;padding:6px 4px;border-bottom:1px dashed rgba(0,0,0,0.03)}
.stats-item:last-child{border-bottom:0}

.modal{position:fixed;inset:0;background:rgba(0,0,0,0.42);display:flex;align-items:center;justify-content:center;padding:20px;z-index:100}
.modal-content{width:min(900px,98%);background:var(--card);padding:18px;border-radius:12px;box-shadow:0 14px 40px rgba(8,12,30,0.3);backdrop-filter: blur(10px);border:1px solid var(--glass-border)}
.hidden{display:none}
label{display:block;margin-bottom:8px;font-size:13px;color:#111}
label input, label textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(10,30,60,0.04);margin-top:6px;font-family:inherit}
textarea{min-height:90px;resize:vertical}
.form-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:8px}
.form-message{color:#b32a2a;margin-top:6px}

@media (max-width:1000px){
  .app{grid-template-columns:1fr;grid-auto-rows:auto}
  .panel{order:3;width:100%}
}
body.dark-mode {
  background:#0d1117 !important;
  color:#f0f6fc !important;
}

body.dark-mode .glass,
body.dark-mode .panel,
body.dark-mode .chat-area {
  background:rgba(255,255,255,0.05) !important;
  border-color:rgba(255,255,255,0.08) !important;
}

body.dark-mode .message.user {
  background:linear-gradient(90deg,#07263b,#0e3a52) !important;
  color:white;
}

body.dark-mode .message.bot {
  background:linear-gradient(90deg,#161b22,#1d2633) !important;
  color:white;
}
